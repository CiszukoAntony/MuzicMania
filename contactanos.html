<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MuzicMania - Contacto</title>
    <link rel="icon" type="image/png" href="assets/logo.png">
    <link rel="apple-touch-icon" href="assets/logo.png">
    <link rel="stylesheet" href="styles.css?v=2656625887">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        .team-member {
            text-align: center;
            padding: var(--spacing-md);
        }

        .team-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--gradient-accent);
            margin: 0 auto var(--spacing-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            border: 3px solid var(--neon-blue);
        }

        .contact-form input,
        .contact-form textarea,
        .contact-form select {
            width: 100%;
            padding: 1rem;
            margin-bottom: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--neon-blue);
            color: #fff;
            font-family: var(--font-body);
            font-size: 1.1rem;
            border-radius: 8px;
        }

        .contact-form textarea {
            min-height: 150px;
            resize: vertical;
        }

        .rating-stars {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin: var(--spacing-sm) 0;
        }

        .rating-stars i {
            font-size: 2rem;
            color: #FFD700;
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .rating-stars i:hover {
            transform: scale(1.2);
        }

        .review-card {
            background: rgba(0, 153, 255, 0.05);
            border-left: 4px solid var(--neon-blue);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
            border-radius: 8px;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-sm);
        }

        .contact-info-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: var(--spacing-sm);
            padding: 1rem;
            background: rgba(0, 153, 255, 0.05);
            border-radius: 8px;
        }

        .contact-info-item i {
            font-size: 1.5rem;
            color: var(--neon-cyan);
        }
    </style>
</head>
<body>
    
    <!-- Main -->
    <main>
        <div class="container">
            <h1 class="text-center mb-3">Contacto y Soporte</h1>

            <!-- Informaci√≥n del Equipo -->
            <section class="mt-3">
                <h2 class="text-center mb-2">Nuestro Equipo</h2>
                <div class="contact-grid">
                    <div class="card team-member">
                        <div class="team-avatar">üë®‚Äçüíº</div>
                        <h3>Alex Rivera</h3>
                        <p style="color: var(--neon-sky); margin: 0.5rem 0;">Creador y Director</p>
                        <p style="font-size: 1rem; color: #888;">Visi√≥n y direcci√≥n del proyecto</p>
                    </div>

                    <div class="card team-member">
                        <div class="team-avatar">üíª</div>
                        <h3>Sam Chen</h3>
                        <p style="color: var(--neon-sky); margin: 0.5rem 0;">Programador Principal</p>
                        <p style="font-size: 1rem; color: #888;">Desarrollo y arquitectura del juego</p>
                    </div>

                    <div class="card team-member">
                        <div class="team-avatar">üé®</div>
                        <h3>Luna Starlight</h3>
                        <p style="color: var(--neon-sky); margin: 0.5rem 0;">Dise√±adora UI/UX</p>
                        <p style="font-size: 1rem; color: #888;">Dise√±o visual y experiencia de usuario</p>
                    </div>

                    <div class="card team-member">
                        <div class="team-avatar">üé®</div>
                        <h3>DJ NeonWave</h3>
                        <p style="color: var(--neon-sky); margin: 0.5rem 0;">Compositor Musical</p>
                        <p style="font-size: 1rem; color: #888;">Bandas sonoras y efectos de audio</p>
                    </div>
                </div>
            </section>

            <!-- Informaci√≥n de Contacto -->
            <section class="mt-3">
                <h2 class="text-center mb-2">Informaci√≥n de Contacto</h2>
                <div class="card">
                    <div class="contact-info-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <strong>Direcci√≥n:</strong><br>
                            Calle Neon Boulevard 123, Piso 42<br>
                            Ciudad Synthwave, Estado Futuro 12345
                        </div>
                    </div>

                    <div class="contact-info-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <strong>Email:</strong><br>
                            <a href="mailto:contact@muzicmania.game" style="color: var(--neon-cyan);">contact@muzicmania.game</a>
                        </div>
                    </div>

                    <div class="contact-info-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <strong>Tel√©fono:</strong><br>
                            +1 (555) NEON-GAME <span style="color: #888;">(+1 555-6366-4263)</span>
                        </div>
                    </div>

                    <div class="contact-info-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <strong>Horario de Atenci√≥n:</strong><br>
                            Lunes a Viernes: 9:00 AM - 6:00 PM (PST)<br>
                            S√°bados: 10:00 AM - 2:00 PM (PST)
                        </div>
                    </div>
                </div>
            </section>

            <!-- Formulario de Contacto -->
            <section class="mt-3">
                <div class="grid" style="grid-template-columns: 1fr 1fr;">
                    <!-- Formulario de Contacto -->
                    <div class="card">
                        <h2 class="mb-2">Env√≠anos un Mensaje</h2>
                        <form class="contact-form" id="contact-form">
                            <div class="form-group">
                                <label>Nombre / Display Name</label>
                                <input type="text" id="contact-name" placeholder="Tu nombre" required>
                            </div>
                            <div class="form-group">
                                <label>Email de Contacto</label>
                                <input type="email" id="contact-email" placeholder="tu@email.com" required>
                            </div>
                            <div class="form-group">
                                <label>Asunto</label>
                                <select id="contact-subject" required>
                                    <option value="">Selecciona un asunto</option>
                                    <option value="support">Soporte T√©cnico</option>
                                    <option value="bug">Reporte de Bug</option>
                                    <option value="suggestion">Sugerencia</option>
                                    <option value="partnership">Propuesta de Colaboraci√≥n</option>
                                    <option value="other">Otro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Mensaje</label>
                                <textarea id="contact-message" placeholder="¬øEn qu√© podemos ayudarte?" style="min-height: 150px;" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-full" id="submit-btn">
                                <i class="fas fa-paper-plane"></i> ENVIAR MENSAJE
                            </button>
                        </form>
                        
                        <!-- Overlay de Env√≠o -->
                        <div id="sending-overlay" style="display: none; position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); border-radius: 20px; z-index: 10; display: flex; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(5px);">
                            <div class="loader-hologram"></div>
                            <h3 style="color: var(--neon-cyan); margin-top: 1rem;">ENVIANDO DATOS AL SERVIDOR...</h3>
                            <div style="width: 80%; height: 4px; background: #333; margin-top: 1rem; border-radius: 2px; overflow: hidden;">
                                <div id="sending-progress" style="width: 0%; height: 100%; background: var(--gradient-main); box-shadow: 0 0 10px var(--neon-cyan);"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Mi Panel de Soporte (Solo Logueados) -->
                    <div class="card" id="support-panel" style="display: none;">
                        <h2 class="mb-2">Mis Tickets <span id="ticket-count" class="badge">0</span></h2>
                        <div id="tickets-list" style="max-height: 400px; overflow-y: auto;">
                            <!-- Tickets din√°micos -->
                        </div>
                        <div class="mt-2 text-center">
                            <p style="font-size: 0.9rem; color: #888;">Los tickets tardan 24-48h en procesarse.</p>
                        </div>
                    </div>

                    <!-- Info de Ayuda (Si no logueado) -->
                    <div class="card" id="guest-panel">
                        <h2 class="mb-2">¬øNecesitas Ayuda R√°pida?</h2>
                        <p class="mb-2">Inicia sesi√≥n para pre-rellenar tus datos y llevar un seguimiento de tus consultas.</p>
                        <button class="btn btn-small" onclick="AuthSystem.openModal('login')">
                            <i class="fas fa-sign-in-alt"></i> INICIAR SESI√ìN
                        </button>
                        <hr style="margin: 2rem 0; border: 0; border-top: 1px solid rgba(255,255,255,0.1);">
                        <h3>Directorio Directo</h3>
                        <ul style="list-style: none; margin-top: 1rem;">
                            <li style="margin-bottom: 1rem;"><i class="fas fa-at" style="color: var(--neon-blue);"></i> support@muzicmania.game</li>
                            <li style="margin-bottom: 1rem;"><i class="fab fa-discord" style="color: #7289da;"></i> Comunidad Discord</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Valoraci√≥n y Rese√±as -->
            <section class="mt-3">
                <h2 class="text-center mb-2">Valoraci√≥n de Usuarios</h2>
                <div class="card text-center" style="max-width: 600px; margin: 0 auto 2rem;">
                    <h3 style="margin-bottom: 1rem;">Califica tu experiencia</h3>
                    <div class="rating-stars" id="user-rating">
                        <i class="fas fa-star" data-rating="1"></i>
                        <i class="fas fa-star" data-rating="2"></i>
                        <i class="fas fa-star" data-rating="3"></i>
                        <i class="fas fa-star" data-rating="4"></i>
                        <i class="fas fa-star" data-rating="5"></i>
                    </div>
                    <p style="color: #888; margin-top: 1rem;">Promedio: <span style="color: var(--neon-cyan); font-size: 1.5rem; font-weight: 700;">4.8</span> / 5.0 (1,247 valoraciones)</p>
                </div>

                <h3 class="mb-2">Rese√±as Recientes</h3>
                <div class="review-card">
                    <div class="review-header">
                        <div>
                            <strong style="color: var(--neon-cyan);">CyberGamer42</strong>
                            <div class="rating-stars" style="font-size: 1rem; justify-content: flex-start;">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                        <span style="color: #888; font-size: 0.9rem;">Hace 2 d√≠as</span>
                    </div>
                    <p>"¬°Incre√≠ble juego! Los visuales son espectaculares y la mec√°nica de juego es s√∫per adictiva. Lo recomiendo 100%."</p>
                </div>

                <div class="review-card">
                    <div class="review-header">
                        <div>
                            <strong style="color: var(--neon-cyan);">NeonQueen</strong>
                            <div class="rating-stars" style="font-size: 1rem; justify-content: flex-start;">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                        </div>
                        <span style="color: #888; font-size: 0.9rem;">Hace 5 d√≠as</span>
                    </div>
                    <p>"Me encanta la est√©tica futurista y las canciones est√°n geniales. Solo le falta m√°s variedad de temas musicales."</p>
                </div>

                <div class="review-card">
                    <div class="review-header">
                        <div>
                            <strong style="color: var(--neon-cyan);">RhythmMaster</strong>
                            <div class="rating-stars" style="font-size: 1rem; justify-content: flex-start;">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                        <span style="color: #888; font-size: 0.9rem;">Hace 1 semana</span>
                    </div>
                    <p>"El mejor juego de ritmo que he jugado en a√±os. La detecci√≥n de teclas es perfecta y el sistema de combos es muy satisfactorio."</p>
                </div>
            </section>

            <!-- FAQ / Preguntas Frecuentes -->
            <section class="mt-3">
                <h2 class="text-center mb-2">Preguntas Frecuentes</h2>
                
                <div class="search-faq mb-2" style="max-width: 600px; margin: 0 auto;">
                    <div class="form-group" style="position: relative;">
                        <i class="fas fa-search" style="position: absolute; left: 15px; top: 15px; color: var(--neon-blue);"></i>
                        <input type="text" id="faq-search" placeholder="Busca una pregunta..." style="padding-left: 45px;">
                    </div>
                </div>

                <div class="grid" id="faq-container">
                    <div class="card faq-item" data-question="reportar bug error fallo">
                        <div class="faq-header" onclick="toggleFAQ(this)" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                            <h3 style="color: var(--neon-sky); font-size: 1.2rem; margin: 0;">¬øC√≥mo reporto un bug?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-content" style="display: none; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 1rem;">
                            <p>Puedes reportar bugs usando el formulario anterior seleccionando "Reporte de Bug" como asunto. Para el Centro de Control de Errores (Error Sentinel), revisa la consola del desarrollador o adjunta el log de la sesi√≥n si es un error fatal.</p>
                        </div>
                    </div>

                    <div class="card faq-item" data-question="sugerir canciones nuevas musica track">
                        <div class="faq-header" onclick="toggleFAQ(this)" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                            <h3 style="color: var(--neon-sky); font-size: 1.2rem; margin: 0;">¬øPuedo sugerir nuevas canciones?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-content" style="display: none; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 1rem;">
                            <p>¬°Por supuesto! Nos encantar√≠a escuchar tus sugerencias. Estamos construyendo una biblioteca de synthwave y electr√≥nica. Usa el formulario con el asunto "Sugerencia".</p>
                        </div>
                    </div>

                    <div class="card faq-item" data-question="gratuito gratis dinero pago">
                        <div class="faq-header" onclick="toggleFAQ(this)" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                            <h3 style="color: var(--neon-sky); font-size: 1.2rem; margin: 0;">¬øEl juego es gratuito?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-content" style="display: none; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 1rem;">
                            <p>S√≠, MuzicMania es y ser√° completamente gratuito. Las puntuaciones y el progreso se guardan localmente y se sincronizan con nuestro servidor Leaderboard.</p>
                        </div>
                    </div>

                    <div class="card faq-item" data-question="movil android ios celular tablet">
                        <div class="faq-header" onclick="toggleFAQ(this)" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                            <h3 style="color: var(--neon-sky); font-size: 1.2rem; margin: 0;">¬øHabr√° versi√≥n m√≥vil?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-content" style="display: none; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 1rem;">
                            <p>Estamos optimizando la interfaz t√°ctil para 2026. Actualmente puedes jugar desde tu navegador m√≥vil en modo horizontal.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Estilos Adicionales (Temporales hasta mover a styles.css) -->
    <style>
        .badge {
            background: var(--neon-pink);
            color: #fff;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            vertical-align: middle;
        }
        .ticket-item {
            padding: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            transition: 0.3s;
        }
        .ticket-item:hover {
            background: rgba(0, 212, 255, 0.05);
        }
        .ticket-status {
            font-size: 0.75rem;
            text-transform: uppercase;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 4px;
        }
        .status-pending { background: rgba(255, 166, 0, 0.2); color: orange; border: 1px solid orange; }
        .status-closed { background: rgba(0, 255, 0, 0.2); color: #0f0; border: 1px solid #0f0; }

        @keyframes rotateHologram {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .loader-hologram {
            width: 50px;
            height: 50px;
            border: 3px solid transparent;
            border-top: 3px solid var(--neon-cyan);
            border-bottom: 3px solid var(--neon-pink);
            border-radius: 50%;
            animation: rotateHologram 1s linear infinite;
        }
    </style>

    <!-- Layout System -->
    <script src="layout.js?v=1"></script>

    <script>
        // --- Gesti√≥n de Tickets (Mock) ---
        const SupportTickets = {
            storageKey: 'muzicmania_tickets',
            getAll: function() {
                return JSON.parse(localStorage.getItem(this.storageKey) || '[]');
            },
            save: function(ticket) {
                const tickets = this.getAll();
                tickets.unshift(ticket);
                localStorage.setItem(this.storageKey, JSON.stringify(tickets));
            },
            render: function() {
                const list = document.getElementById('tickets-list');
                const count = document.getElementById('ticket-count');
                const tickets = this.getAll();
                
                if (!list) return;
                
                count.textContent = tickets.length;
                
                if (tickets.length === 0) {
                    list.innerHTML = `<p style="text-align: center; color: #555; padding: 2rem;">No tienes tickets activos.</p>`;
                    return;
                }

                list.innerHTML = tickets.map(t => `
                    <div class="ticket-item">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span style="color: var(--neon-blue); font-weight: bold;">#${t.id}</span>
                            <span class="ticket-status status-${t.status.toLowerCase()}">${t.status}</span>
                        </div>
                        <div style="font-size: 0.95rem;">${t.subject}</div>
                        <div style="font-size: 0.8rem; color: #888;">${new Date(t.date).toLocaleDateString()}</div>
                    </div>
                `).join('');
            }
        };

        // --- FAQ Logic ---
        function toggleFAQ(el) {
            const content = el.nextElementSibling;
            const icon = el.querySelector('i');
            const isOpen = content.style.display === 'block';
            
            content.style.display = isOpen ? 'none' : 'block';
            icon.classList.toggle('fa-chevron-up', !isOpen);
            icon.classList.toggle('fa-chevron-down', isOpen);
        }

        document.getElementById('faq-search').addEventListener('input', function(e) {
            const term = e.target.value.toLowerCase();
            document.querySelectorAll('.faq-item').forEach(item => {
                const text = item.getAttribute('data-question') + item.textContent.toLowerCase();
                item.style.display = text.includes(term) ? 'block' : 'none';
            });
        });

        // --- Form Interaction ---
        document.getElementById('contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const overlay = document.getElementById('sending-overlay');
            const progress = document.getElementById('sending-progress');
            const submitBtn = document.getElementById('submit-btn');
            
            overlay.style.display = 'flex';
            submitBtn.disabled = true;
            
            let p = 0;
            const interval = setInterval(() => {
                p += Math.random() * 20;
                if (p >= 100) {
                    p = 100;
                    clearInterval(interval);
                    
                    // Guardar ticket simulado
                    SupportTickets.save({
                        id: Math.random().toString(36).substr(2, 6).toUpperCase(),
                        subject: document.getElementById('contact-subject').options[document.getElementById('contact-subject').selectedIndex].text,
                        date: new Date().toISOString(),
                        status: 'PENDING'
                    });

                    setTimeout(() => {
                        overlay.style.display = 'none';
                        alert('¬°Transmisi√≥n Completada! Tu mensaje ha sido enviado al Centro de Comando. Recibir√°s respuesta pronto.');
                        this.reset();
                        submitBtn.disabled = false;
                        progress.style.width = '0%';
                        SupportTickets.render();
                    }, 500);
                }
                progress.style.width = p + '%';
            }, 300);
        });

        // --- Auth Integration (Auto-fill) ---
        function initializeContactPage() {
            if (typeof AuthSystem === 'undefined') {
                setTimeout(initializeContactPage, 100);
                return;
            }

            const user = AuthSystem.getCurrentUser();
            const guestPanel = document.getElementById('guest-panel');
            const supportPanel = document.getElementById('support-panel');

            if (user) {
                document.getElementById('contact-name').value = user.username + " (" + user.initials + ")";
                document.getElementById('contact-email').value = user.email || "usuario@muzicmania.game";
                
                guestPanel.style.display = 'none';
                supportPanel.style.display = 'block';
                SupportTickets.render();
            } else {
                guestPanel.style.display = 'block';
                supportPanel.style.display = 'none';
            }
        }

        window.addEventListener('load', initializeContactPage);
        // Escuchar cambios de login
        window.addEventListener('authChange', initializeContactPage);

    </script>
    <script src="auth.js?v=2"></script>
    <script src="utils.js?v=1"></script>
    <script src="search.js?v=1"></script>
    <script src="navigation.js?v=2656625887"></script>
</body>
</html>
